<!DOCTYPE html>
<html>
<head>
  <title>Monster Slayer</title>
  <script src="https://npmcdn.com/vue/dist/vue.js"></script>
  <link rel="stylesheet" href="css/foundation.min.css">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
  <div id="app">
    <section class="row">
      <div class="small-6 columns">
        <h1 class="text-center">YOU</h1>
        <div class="healthbar">
          <div class="healthbar text-center" :style="healthbar">
            {{ healthbar.width }}
            <template v-if="healthbar.width <= '0%'">
              {{ finishGame('lose!') }}
            </template>
          </div>
        </div>
      </div>
      <div class="small-6 columns">
        <h1 class="text-center">MONSTER</h1>
        <div class="healthbar">
          <div class="healthbar text-center" :style="monsterHealthbar">
            {{ monsterHealthbar.width }}
            <template v-if="monsterHealthbar.width <= '0%'">
              {{ finishGame('win!') }}
            </template>
          </div>
        </div>
      </div>
    </section>
    <section class="row controls" v-show="!newGame">
      <div class="small-12 columns">
        <button id="start-game" @click="newGame = !newGame">START NEW GAME</button>
      </div>
    </section>
    <section class="row controls"  v-show="newGame">
      <div class="small-12 columns">
        <button id="attack" @click="turn('attack')">ATTACK</button>
        <button id="special-attack" @click="turn('specialattack')">SPECIAL ATTACK</button>
        <button id="heal" @click="turn('heal')">HEAL</button>
        <button id="give-up" @click="turn('giveup')">GIVE UP</button>
      </div>
    </section>
    <section class="row log">
      <div class="small-12 columns">
        <ul>
          <template v-for="log in battleLog">
            <li class="player-turn">
                PLAYER HITS MONSTER FOR {{ log.playerTurn }}
            </li>
            <li class="monster-turn">
                MONSTER HITS PLAYER FOR {{ log.monsterTurn }}
            </li>
          </template>
        </ul>
      </div>
    </section>
  </div>
  <script>
  new Vue({
    el: '#app',
    data: {
      newGame: false,
      healthbar: {
        width: '100%',
        backgroundColor: 'green',
        margin: 0,
        color: 'white'
      },
      monsterHealthbar: {
        width: '100%',
        backgroundColor: 'green',
        margin: 0,
        color: 'white'
      },
      battleLog: [
        {playerTurn: '', monsterTurn: ''},
      ]
    },
    methods: {
      turn: function(event){
        var self = this;
        var myLife = this.healthbar.width;
        myLife = Number(myLife.replace('%',''));
        var monsterLife = this.monsterHealthbar.width;
        monsterLife = Number(monsterLife.replace('%',''))
        switch (event) {
          case "attack":
            myLife = myLife - 8;
            monsterLife = monsterLife - 10;
            this.healthbar.width = myLife + '%';
            this.monsterHealthbar.width = monsterLife + '%';
            this.battleLog.push({playerTurn: '10',
                            monsterTurn: '8'});
            break;
          case "heal":
            if(myLife < 100){
              myLife = myLife + 10;
              this.healthbar.width = myLife + '%';
            }
            break;
          case "specialattack":
            myLife = myLife - 15;
            monsterLife = monsterLife - 20;
            this.healthbar.width = myLife + '%';
            this.monsterHealthbar.width = monsterLife + '%';
            this.battleLog.push({playerTurn: '20',
                            monsterTurn: '15'});

            break;
          case "giveup":
            this.healthbar.width = '100%';
            this.monsterHealthbar.width = '100%';
            this.newGame = false;
            break;
          default:
            myLife = myLife - 1;
            monsterLife = monsterLife - 1;
            this.healthbar.width = myLife + '%';
            this.monsterHealthbar.width = monsterLife + '%';
        }
      },
      finishGame: function(event){
        alert("You " + event);
        this.newGame = false;
        this.healthbar.width = '100%';
        this.monsterHealthbar.width = '100%';
      },
    }
  });
  </script>
</body>
</html>
